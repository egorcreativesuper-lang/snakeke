<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <title>–ó–º–µ–π–∫–∞ - –¢–æ–ª—å–∫–æ —Å–≤–∞–π–ø—ã</title>
    <style>
        /* –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            touch-action: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            color: white;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        /* –°—Ç–∞—Ç—É—Å –±–∞—Ä */
        .status-bar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-area {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1/1;
            background: #0f3460;
            border: 3px solid #4CAF50;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(76, 175, 80, 0.3);
        }

        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ä—Ç–∞ */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
            z-index: 100;
        }

        .start-screen h1 {
            color: #4CAF50;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .start-screen p {
            color: #aaa;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .start-btn {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            padding: 15px 40px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .start-btn:active {
            transform: scale(0.95);
        }

        /* –≠–∫—Ä–∞–Ω –ø–∞—É–∑—ã */
        .pause-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
            z-index: 100;
        }

        .pause-screen h2 {
            color: #FF9800;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .pause-screen p {
            color: #aaa;
            margin-bottom: 10px;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            background: linear-gradient(145deg, #2196F3, #1976D2);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            padding: 10px 20px;
            cursor: pointer;
            min-width: 120px;
        }

        /* –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã –æ–∫–æ–Ω—á–µ–Ω–∞ */
        .game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
            z-index: 100;
        }

        .game-over-screen h2 {
            color: #ff4444;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .game-stats {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            width: 80%;
        }

        /* –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è */
        .instructions {
            margin-top: 20px;
            text-align: center;
            color: #aaa;
            font-size: 14px;
            padding: 10px;
        }

        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 350px) {
            .status-bar {
                padding: 10px;
                gap: 10px;
            }
            
            .stat-value {
                font-size: 20px;
            }
            
            .start-screen h1 {
                font-size: 2rem;
            }
        }

        /* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
        @media (orientation: landscape) and (max-height: 500px) {
            body {
                flex-direction: row;
                gap: 20px;
                padding: 10px;
            }
            
            .status-bar {
                flex: 0 0 150px;
                grid-template-columns: 1fr;
                margin-bottom: 0;
                height: 300px;
            }
            
            .game-area {
                flex: 1;
                max-width: none;
                max-height: 90vh;
            }
            
            .instructions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <div class="stat">
            <div class="stat-label">–°—á–µ—Ç</div>
            <div class="stat-value" id="score">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">–î–ª–∏–Ω–∞</div>
            <div class="stat-value" id="length">3</div>
        </div>
        <div class="stat">
            <div class="stat-label">–†–µ–∫–æ—Ä–¥</div>
            <div class="stat-value" id="highScore">0</div>
        </div>
    </div>

    <div class="game-area">
        <canvas id="gameCanvas"></canvas>
        
        <div class="start-screen" id="startScreen">
            <h1>üêç –ó–ú–ï–ô–ö–ê</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–≤–∞–π–ø—ã –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —ç–∫—Ä–∞–Ω–∞</p>
            <p>–°–æ–±–∏—Ä–∞–π—Ç–µ –∫—Ä–∞—Å–Ω—É—é –µ–¥—É, –∏–∑–±–µ–≥–∞–π—Ç–µ —Å—Ç–µ–Ω</p>
            <button class="start-btn" id="startBtn">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
        </div>
        
        <div class="pause-screen" id="pauseScreen">
            <h2>–ü–ê–£–ó–ê</h2>
            <p>–ò–≥—Ä–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</p>
            <div class="control-buttons">
                <button class="control-btn" id="resumeBtn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                <button class="control-btn" id="restartBtn">–ó–∞–Ω–æ–≤–æ</button>
            </div>
        </div>
        
        <div class="game-over-screen" id="gameOverScreen">
            <h2>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <div class="game-stats">
                <p>–°—á–µ—Ç: <span id="finalScore">0</span></p>
                <p>–î–ª–∏–Ω–∞: <span id="finalLength">3</span></p>
                <p>–†–µ–∫–æ—Ä–¥: <span id="finalHighScore">0</span></p>
            </div>
            <div class="control-buttons">
                <button class="control-btn" id="newGameBtn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>
    </div>

    <div class="instructions">
        üî∏ –î–µ–ª–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–≤–∞–π–ø—ã –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    </div>

    <script>
        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–ù–í–ê–°–ê ===
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞
        function resizeCanvas() {
            const container = document.querySelector('.game-area');
            const size = Math.min(container.clientWidth, container.clientHeight);
            canvas.width = size;
            canvas.height = size;
        }
        
        // === –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
        const GRID_SIZE = 20;
        let TILE_SIZE;
        const GAME_SPEED = 150; // –º—Å
        
        let snake = [];
        let food = {};
        let direction = 'right';
        let nextDirection = 'right';
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let gameRunning = false;
        let gameLoop;
        let isPaused = false;
        
        // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —Å–≤–∞–π–ø–æ–≤
        let touchStartX = 0;
        let touchStartY = 0;
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const startScreen = document.getElementById('startScreen');
        const pauseScreen = document.getElementById('pauseScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const scoreElement = document.getElementById('score');
        const lengthElement = document.getElementById('length');
        const highScoreElement = document.getElementById('highScore');
        const finalScoreElement = document.getElementById('finalScore');
        const finalLengthElement = document.getElementById('finalLength');
        const finalHighScoreElement = document.getElementById('finalHighScore');
        
        // === –§–£–ù–ö–¶–ò–ò –ò–ì–†–´ ===
        function initGame() {
            resizeCanvas();
            TILE_SIZE = canvas.width / GRID_SIZE;
            
            // –°–æ–∑–¥–∞–µ–º –∑–º–µ–π–∫—É
            snake = [
                {x: 5, y: 10},
                {x: 4, y: 10},
                {x: 3, y: 10}
            ];
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            direction = 'right';
            nextDirection = 'right';
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –µ–¥—É
            generateFood();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç
            score = 0;
            updateScore();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ—Ä–¥
            highScoreElement.textContent = highScore;
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            drawGame();
        }
        
        function generateFood() {
            let foodOnSnake;
            
            do {
                foodOnSnake = false;
                food = {
                    x: Math.floor(Math.random() * GRID_SIZE),
                    y: Math.floor(Math.random() * GRID_SIZE)
                };
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞ –∑–º–µ–π–∫–µ –ª–∏ –µ–¥–∞
                for (let segment of snake) {
                    if (segment.x === food.x && segment.y === food.y) {
                        foodOnSnake = true;
                        break;
                    }
                }
            } while (foodOnSnake);
        }
        
        function updateScore() {
            scoreElement.textContent = score;
            lengthElement.textContent = snake.length;
            
            if (score > highScore) {
                highScore = score;
                highScoreElement.textContent = highScore;
                localStorage.setItem('snakeHighScore', highScore);
            }
        }
        
        function gameUpdate() {
            if (isPaused || !gameRunning) return;
            
            direction = nextDirection;
            const head = {...snake[0]};
            
            // –î–≤–∏–∂–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã
            switch (direction) {
                case 'up': head.y--; break;
                case 'down': head.y++; break;
                case 'left': head.x--; break;
                case 'right': head.x++; break;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏
            if (head.x < 0 || head.x >= GRID_SIZE || head.y < 0 || head.y >= GRID_SIZE) {
                endGame();
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å —Å–æ–±–æ–π
            for (let segment of snake) {
                if (head.x === segment.x && head.y === segment.y) {
                    endGame();
                    return;
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É
            snake.unshift(head);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å—ä–µ–¥–µ–Ω–∞ –ª–∏ –µ–¥–∞
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                
                // –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }
                
                generateFood();
                updateScore();
            } else {
                snake.pop();
            }
            
            drawGame();
        }
        
        function drawGame() {
            // –û—á–∏—â–∞–µ–º –∫–∞–Ω–≤–∞—Å
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∑–º–µ–π–∫—É
            snake.forEach((segment, index) => {
                // –¶–≤–µ—Ç –∑–º–µ–π–∫–∏
                if (index === 0) {
                    ctx.fillStyle = '#4CAF50'; // –ì–æ–ª–æ–≤–∞
                } else {
                    ctx.fillStyle = '#2E7D32'; // –¢–µ–ª–æ
                }
                
                // –†–∏—Å—É–µ–º —Å–µ–≥–º–µ–Ω—Ç
                ctx.fillRect(
                    segment.x * TILE_SIZE + 1,
                    segment.y * TILE_SIZE + 1,
                    TILE_SIZE - 2,
                    TILE_SIZE - 2
                );
                
                // –†–∏—Å—É–µ–º –≥–ª–∞–∑–∞ —É –≥–æ–ª–æ–≤—ã
                if (index === 0) {
                    ctx.fillStyle = '#000';
                    
                    let eye1X, eye1Y, eye2X, eye2Y;
                    
                    switch (direction) {
                        case 'up':
                            eye1X = segment.x * TILE_SIZE + TILE_SIZE * 0.3;
                            eye1Y = segment.y * TILE_SIZE + TILE_SIZE * 0.3;
                            eye2X = segment.x * TILE_SIZE + TILE_SIZE * 0.7;
                            eye2Y = segment.y * TILE_SIZE + TILE_SIZE * 0.3;
                            break;
                        case 'down':
                            eye1X = segment.x * TILE_SIZE + TILE_SIZE * 0.3;
                            eye1Y = segment.y * TILE_SIZE + TILE_SIZE * 0.7;
                            eye2X = segment.x * TILE_SIZE + TILE_SIZE * 0.7;
                            eye2Y = segment.y * TILE_SIZE + TILE_SIZE * 0.7;
                            break;
                        case 'left':
                            eye1X = segment.x * TILE_SIZE + TILE_SIZE * 0.3;
                            eye1Y = segment.y * TILE_SIZE + TILE_SIZE * 0.3;
                            eye2X = segment.x * TILE_SIZE + TILE_SIZE * 0.3;
                            eye2Y = segment.y * TILE_SIZE + TILE_SIZE * 0.7;
                            break;
                        case 'right':
                            eye1X = segment.x * TILE_SIZE + TILE_SIZE * 0.7;
                            eye1Y = segment.y * TILE_SIZE + TILE_SIZE * 0.3;
                            eye2X = segment.x * TILE_SIZE + TILE_SIZE * 0.7;
                            eye2Y = segment.y * TILE_SIZE + TILE_SIZE * 0.7;
                            break;
                    }
                    
                    // –†–∏—Å—É–µ–º –≥–ª–∞–∑–∞
                    ctx.beginPath();
                    ctx.arc(eye1X, eye1Y, TILE_SIZE * 0.1, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(eye2X, eye2Y, TILE_SIZE * 0.1, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –µ–¥—É
            ctx.fillStyle = '#ff4444';
            ctx.beginPath();
            ctx.arc(
                food.x * TILE_SIZE + TILE_SIZE / 2,
                food.y * TILE_SIZE + TILE_SIZE / 2,
                TILE_SIZE / 2 - 2,
                0,
                Math.PI * 2
            );
            ctx.fill();
            
            // –ë–ª–∏–∫ –Ω–∞ –µ–¥–µ
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.arc(
                food.x * TILE_SIZE + TILE_SIZE / 2 - TILE_SIZE * 0.15,
                food.y * TILE_SIZE + TILE_SIZE / 2 - TILE_SIZE * 0.15,
                TILE_SIZE * 0.1,
                0,
                Math.PI * 2
            );
            ctx.fill();
        }
        
        function startGame() {
            gameRunning = true;
            isPaused = false;
            startScreen.style.display = 'none';
            pauseScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            clearInterval(gameLoop);
            gameLoop = setInterval(gameUpdate, GAME_SPEED);
        }
        
        function pauseGame() {
            if (!gameRunning) return;
            
            isPaused = true;
            pauseScreen.style.display = 'flex';
        }
        
        function resumeGame() {
            if (!gameRunning) return;
            
            isPaused = false;
            pauseScreen.style.display = 'none';
            drawGame();
        }
        
        function endGame() {
            gameRunning = false;
            clearInterval(gameLoop);
            
            finalScoreElement.textContent = score;
            finalLengthElement.textContent = snake.length;
            finalHighScoreElement.textContent = highScore;
            
            gameOverScreen.style.display = 'flex';
            
            // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–∏
            if ('vibrate' in navigator) {
                navigator.vibrate([100, 50, 100, 50, 100]);
            }
        }
        
        // === –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–í–ê–ô–ü–ê–ú–ò ===
        function handleTouchStart(e) {
            if (!gameRunning || isPaused) return;
            
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
            
            e.preventDefault();
        }
        
        function handleTouchEnd(e) {
            if (!gameRunning || isPaused || !touchStartX || !touchStartY) return;
            
            const touch = e.changedTouches[0];
            const deltaX = touch.clientX - touchStartX;
            const deltaY = touch.clientY - touchStartY;
            const minSwipeDistance = 20; // –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π —Å–≤–∞–π–ø
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            touchStartX = 0;
            touchStartY = 0;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
            if (Math.abs(deltaX) < minSwipeDistance && Math.abs(deltaY) < minSwipeDistance) {
                return; // –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∂–µ—Å—Ç
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–∞–π–ø–∞
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
                if (deltaX > 0 && direction !== 'left') {
                    nextDirection = 'right';
                } else if (deltaX < 0 && direction !== 'right') {
                    nextDirection = 'left';
                }
            } else {
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
                if (deltaY > 0 && direction !== 'up') {
                    nextDirection = 'down';
                } else if (deltaY < 0 && direction !== 'down') {
                    nextDirection = 'up';
                }
            }
            
            e.preventDefault();
        }
        
        // === –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–õ–ê–í–ò–ê–¢–£–†–û–ô (–¥–ª—è –ü–ö) ===
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            switch (e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    if (direction !== 'down') nextDirection = 'up';
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    if (direction !== 'up') nextDirection = 'down';
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    if (direction !== 'right') nextDirection = 'left';
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    if (direction !== 'left') nextDirection = 'right';
                    break;
                case ' ':
                    if (isPaused) {
                        resumeGame();
                    } else {
                        pauseGame();
                    }
                    break;
                case 'Escape':
                    pauseGame();
                    break;
            }
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
                e.preventDefault();
            }
        });
        
        // === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–ù–û–ü–û–ö ===
        document.getElementById('startBtn').addEventListener('click', () => {
            initGame();
            startGame();
        });
        
        document.getElementById('resumeBtn').addEventListener('click', resumeGame);
        
        document.getElementById('restartBtn').addEventListener('click', () => {
            initGame();
            startGame();
        });
        
        document.getElementById('newGameBtn').addEventListener('click', () => {
            initGame();
            startGame();
        });
        
        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        window.addEventListener('load', () => {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∫–æ—Ä–¥
            highScore = localStorage.getItem('snakeHighScore') || 0;
            document.getElementById('highScore').textContent = highScore;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É (–Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ–º)
            initGame();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–≤–∞–π–ø–æ–≤
            document.addEventListener('touchstart', handleTouchStart, { passive: false });
            document.addEventListener('touchend', handleTouchEnd, { passive: false });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª
            document.addEventListener('touchmove', (e) => {
                if (gameRunning) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ —Ç–∞–ø–∞ –¥–ª—è –∑—É–º–∏—Ä–æ–≤–∞–Ω–∏—è
            let lastTouchEnd = 0;
            document.addEventListener('touchend', (e) => {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    e.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            console.log('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
        window.addEventListener('resize', () => {
            resizeCanvas();
            TILE_SIZE = canvas.width / GRID_SIZE;
            if (gameRunning && !isPaused) {
                drawGame();
            }
        });
        
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                resizeCanvas();
                TILE_SIZE = canvas.width / GRID_SIZE;
                if (gameRunning && !isPaused) {
                    drawGame();
                }
            }, 100);
        });
    </script>
</body>
</html>
